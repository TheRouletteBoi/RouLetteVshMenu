<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Class template segment_manager_base</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../../boost_interprocess_reference.html#header.boost.interprocess.segment_manager.hpp" title="Header &lt;boost/interprocess/segment_manager.hpp&gt;">
<link rel="prev" href="swap_id2900728.html" title="Function template swap">
<link rel="next" href="segment_manager.html" title="Class template segment_manager">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="swap_id2900728.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.segment_manager.hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="segment_manager.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="refentry" lang="en">
<a name="boost.interprocess.segment_manager_base"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template segment_manager_base</span></h2>
<p>boost::interprocess::segment_manager_base</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> MemoryAlgorithm&gt; 
<span class="bold"><strong>class</strong></span> <a class="link" href="segment_manager_base.html" title="Class template segment_manager_base">segment_manager_base</a> {
<span class="bold"><strong>public</strong></span>:
  <span class="emphasis"><em>// types</em></span>
  <span class="bold"><strong>typedef</strong></span> <a class="link" href="segment_manager_base.html" title="Class template segment_manager_base">segment_manager_base</a>&lt; MemoryAlgorithm &gt; <a name="boost.interprocess.segment_manager_base.segment_manager_base_type"></a>segment_manager_base_type;
  <span class="bold"><strong>typedef</strong></span> MemoryAlgorithm::void_pointer           <a name="boost.interprocess.segment_manager_base.void_pointer"></a>void_pointer;             
  <span class="bold"><strong>typedef</strong></span> MemoryAlgorithm::mutex_family           <a name="boost.interprocess.segment_manager_base.mutex_family"></a>mutex_family;             
  <span class="bold"><strong>typedef</strong></span> MemoryAlgorithm                         <a name="boost.interprocess.segment_manager_base.memory_algorithm"></a>memory_algorithm;         

  <span class="emphasis"><em>// <a class="link" href="segment_manager_base.html#boost.interprocess.segment_manager_baseconstruct-copy-destruct">construct/copy/destruct</a></em></span>
  <a class="link" href="segment_manager_base.html#id2901298-bb">segment_manager_base</a>(std::size_t, std::size_t);

  <span class="emphasis"><em>// <a class="link" href="segment_manager_base.html#id2900971-bb">public member functions</a></em></span>
  <span class="type">std::size_t</span> <a class="link" href="segment_manager_base.html#id2900974-bb">get_size</a>() <span class="bold"><strong>const</strong></span>;
  <span class="type">std::size_t</span> <a class="link" href="segment_manager_base.html#id2900986-bb">get_free_memory</a>() <span class="bold"><strong>const</strong></span>;
  <span class="type"><span class="bold"><strong>void</strong></span> *</span> <a class="link" href="segment_manager_base.html#id2900999-bb">allocate</a>(std::size_t, std::nothrow_t) ;
  <span class="type"><span class="bold"><strong>void</strong></span> *</span> <a class="link" href="segment_manager_base.html#id2901023-bb">allocate</a>(std::size_t) ;
  <span class="type"><span class="bold"><strong>void</strong></span> *</span> <a class="link" href="segment_manager_base.html#id2901042-bb">allocate_aligned</a>(std::size_t, std::size_t, std::nothrow_t) ;
  <span class="type"><span class="bold"><strong>void</strong></span> *</span> <a class="link" href="segment_manager_base.html#id2901072-bb">allocate_aligned</a>(std::size_t, std::size_t) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T&gt; 
    <span class="type">std::pair&lt; T *, <span class="bold"><strong>bool</strong></span> &gt;</span> 
    <a class="link" href="segment_manager_base.html#id2901097-bb">allocation_command</a>(allocation_type, std::size_t, std::size_t, 
                       std::size_t &amp;, T * = 0) ;
  <span class="type">std::pair&lt; <span class="bold"><strong>void</strong></span> *, <span class="bold"><strong>bool</strong></span> &gt;</span> 
  <a class="link" href="segment_manager_base.html#id2901144-bb">raw_allocation_command</a>(allocation_type, std::size_t, std::size_t, 
                         std::size_t &amp;, <span class="bold"><strong>void</strong></span> * = 0, std::size_t = 1) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="segment_manager_base.html#id2901192-bb">deallocate</a>(<span class="bold"><strong>void</strong></span> *) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="segment_manager_base.html#id2901211-bb">grow</a>(std::size_t) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="segment_manager_base.html#id2901229-bb">shrink_to_fit</a>() ;
  <span class="type"><span class="bold"><strong>bool</strong></span></span> <a class="link" href="segment_manager_base.html#id2901242-bb">all_memory_deallocated</a>() ;
  <span class="type"><span class="bold"><strong>bool</strong></span></span> <a class="link" href="segment_manager_base.html#id2901255-bb">check_sanity</a>() ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="segment_manager_base.html#id2901268-bb">zero_free_memory</a>() ;
  <span class="type">std::size_t</span> <a class="link" href="segment_manager_base.html#id2901281-bb">size</a>(<span class="bold"><strong>const</strong></span> <span class="bold"><strong>void</strong></span> *) <span class="bold"><strong>const</strong></span>;

  <span class="emphasis"><em>// <a class="link" href="segment_manager_base.html#id2901326-bb">public static functions</a></em></span>
  <span class="type"><span class="bold"><strong>static</strong></span> std::size_t</span> <a class="link" href="segment_manager_base.html#id2901330-bb">get_min_size</a>(std::size_t) ;
  <span class="bold"><strong>static</strong></span> <span class="type"><span class="bold"><strong>const</strong></span> std::size_t</span> PayloadPerAllocation;
};</pre></div>
<div class="refsect1" lang="en">
<a name="id3128876"></a><h2>Description</h2>
<p>This object is the public base class of segment manager. This class only depends on the memory allocation algorithm and implements all the allocation features not related to named or unique objects.</p>
<p>Storing a reference to segment_manager forces the holder class to be dependent on index types and character types. When such dependence is not desirable and only anonymous and raw allocations are needed, segment_manager_base is the correct answer. </p>
<div class="refsect2" lang="en">
<a name="id3128892"></a><h3>
<a name="boost.interprocess.segment_manager_baseconstruct-copy-destruct"></a><code class="computeroutput">segment_manager_base</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol type="1"><li>
<pre class="literallayout"><a name="id2901298-bb"></a>segment_manager_base(std::size_t size, std::size_t reserved_bytes);</pre>
<p>Constructor of the segment_manager_base</p>
<p>"size" is the size of the memory segment where the basic segment manager is being constructed.</p>
<p>"reserved_bytes" is the number of bytes after the end of the memory algorithm object itself that the memory algorithm will exclude from dynamic allocation</p>
<p>Can throw </p>
</li></ol></div>
</div>
<div class="refsect2" lang="en">
<a name="id3128936"></a><h3>
<a name="id2900971-bb"></a><code class="computeroutput">segment_manager_base</code> public member functions</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><span class="type">std::size_t</span> <a name="id2900974-bb"></a>get_size() <span class="bold"><strong>const</strong></span>;</pre>
<p>Returns the size of the memory segment </p>
</li>
<li>
<pre class="literallayout"><span class="type">std::size_t</span> <a name="id2900986-bb"></a>get_free_memory() <span class="bold"><strong>const</strong></span>;</pre>
<p>Returns the number of free bytes of the memory segment </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span> *</span> <a name="id2900999-bb"></a>allocate(std::size_t nbytes, std::nothrow_t) ;</pre>
<p>Allocates nbytes bytes. This function is only used in single-segment management. Never throws </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span> *</span> <a name="id2901023-bb"></a>allocate(std::size_t nbytes) ;</pre>
<p>Allocates nbytes bytes. Throws boost::interprocess::bad_alloc on failure </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span> *</span> <a name="id2901042-bb"></a>allocate_aligned(std::size_t nbytes, std::size_t alignment, 
                        std::nothrow_t) ;</pre>
<p>Allocates nbytes bytes. This function is only used in single-segment management. Never throws </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span> *</span> <a name="id2901072-bb"></a>allocate_aligned(std::size_t nbytes, std::size_t alignment) ;</pre>
<p>Allocates nbytes bytes. This function is only used in single-segment management. Throws bad_alloc when fails </p>
</li>
<li><pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T&gt; 
  <span class="type">std::pair&lt; T *, <span class="bold"><strong>bool</strong></span> &gt;</span> 
  <a name="id2901097-bb"></a>allocation_command(allocation_type command, std::size_t limit_size, 
                     std::size_t preferred_size, std::size_t &amp; received_size, 
                     T * reuse_ptr = 0) ;</pre></li>
<li><pre class="literallayout"><span class="type">std::pair&lt; <span class="bold"><strong>void</strong></span> *, <span class="bold"><strong>bool</strong></span> &gt;</span> 
<a name="id2901144-bb"></a>raw_allocation_command(allocation_type command, std::size_t limit_objects, 
                       std::size_t preferred_objects, 
                       std::size_t &amp; received_objects, <span class="bold"><strong>void</strong></span> * reuse_ptr = 0, 
                       std::size_t sizeof_object = 1) ;</pre></li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2901192-bb"></a>deallocate(<span class="bold"><strong>void</strong></span> * addr) ;</pre>
<p>Deallocates the bytes allocated with allocate/allocate_many() pointed by addr </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2901211-bb"></a>grow(std::size_t extra_size) ;</pre>
<p>Increases managed memory in extra_size bytes more. This only works with single-segment management. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2901229-bb"></a>shrink_to_fit() ;</pre>
<p>Decreases managed memory to the minimum. This only works with single-segment management. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>bool</strong></span></span> <a name="id2901242-bb"></a>all_memory_deallocated() ;</pre>
<p>Returns the result of "all_memory_deallocated()" function of the used memory algorithm </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>bool</strong></span></span> <a name="id2901255-bb"></a>check_sanity() ;</pre>
<p>Returns the result of "check_sanity()" function of the used memory algorithm </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2901268-bb"></a>zero_free_memory() ;</pre>
<p>Writes to zero free memory (memory not yet allocated) of the memory algorithm </p>
</li>
<li><pre class="literallayout"><span class="type">std::size_t</span> <a name="id2901281-bb"></a>size(<span class="bold"><strong>const</strong></span> <span class="bold"><strong>void</strong></span> * ptr) <span class="bold"><strong>const</strong></span>;</pre></li>
</ol></div>
</div>
<div class="refsect2" lang="en">
<a name="id3129327"></a><h3>
<a name="id2901326-bb"></a><code class="computeroutput">segment_manager_base</code> public static functions</h3>
<div class="orderedlist"><ol type="1"><li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>static</strong></span> std::size_t</span> <a name="id2901330-bb"></a>get_min_size(std::size_t size) ;</pre>
<p>Obtains the minimum size needed by the segment manager </p>
</li></ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2005 - 2007 Ion Gaztañaga<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="swap_id2900728.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.segment_manager.hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="segment_manager.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
